# complete-with-testids.yaml - Complete screenshot flow using testIDs
# Run: maestro test .maestro/flows/complete-with-testids.yaml
#
# This is the recommended flow - uses testIDs for reliable element selection

appId: host.exp.Exponent

# Test credentials
env:
  TEST_PHONE: "0000000000"
  TEST_PASSWORD: "3rwnSHUx2TFRvU"
  TEST_NAME: "Kate"

---
# ========================================
# NOTE: Start your app in Expo Go first!
# Run: npm start, then open in simulator
# Then run: npm run screenshots
# ========================================

# ========================================
# 1. INTRO SCREEN
# ========================================
# Wait for intro to load
- extendedWaitUntil:
    visible:
      text: "Reelful"
    timeout: 15000

# Wait for animation to complete and buttons to appear
- extendedWaitUntil:
    visible:
      text: "Get Started"
    timeout: 10000

- takeScreenshot: .maestro/screenshots/01-intro

# ========================================
# 2. AUTH - PHONE ENTRY
# ========================================
- tapOn:
    text: "Get Started"

- extendedWaitUntil:
    visible:
      text: "Welcome!"
    timeout: 5000

- takeScreenshot: .maestro/screenshots/02-auth-empty

# Enter phone using testID
- tapOn:
    id: "phoneInput"

- inputText: ${TEST_PHONE}

- takeScreenshot: .maestro/screenshots/02-auth-phone-filled

# ========================================
# 3. AUTH - PASSWORD (BACKDOOR)
# ========================================
- tapOn:
    id: "continueButton"

- extendedWaitUntil:
    visible:
      text: "Enter Password"
    timeout: 5000

- takeScreenshot: .maestro/screenshots/03-auth-password-empty

- tapOn:
    id: "passwordInput"

- inputText: ${TEST_PASSWORD}

- takeScreenshot: .maestro/screenshots/03-auth-password-filled

# ========================================
# 4. LOGIN
# ========================================
- tapOn:
    id: "loginButton"

# ========================================
# 5. ONBOARDING - NAME
# ========================================
- extendedWaitUntil:
    visible:
      text: "Welcome to Reelful"
    timeout: 15000

- takeScreenshot: .maestro/screenshots/04-onboarding-name-empty

- tapOn:
    id: "nameInput"

- inputText: ${TEST_NAME}

# Dismiss keyboard
- hideKeyboard

- takeScreenshot: .maestro/screenshots/04-onboarding-name-filled

# ========================================
# 6. ONBOARDING - VOICE
# ========================================
- tapOn:
    id: "nextButton"

- extendedWaitUntil:
    visible:
      text: "Record Your Voice"
    timeout: 5000

- takeScreenshot: .maestro/screenshots/05-onboarding-voice

# Skip voice recording
- tapOn:
    text: "Skip for now"

# ========================================
# 7. FEED SCREEN
# ========================================
# Take screenshot (app should be on feed after onboarding)
- takeScreenshot: .maestro/screenshots/06-feed

# ========================================
# SUMMARY
# ========================================
# Screenshots captured:
# - 01-intro.png
# - 02-auth-empty.png
# - 02-auth-phone-filled.png
# - 03-auth-password-empty.png
# - 03-auth-password-filled.png
# - 04-onboarding-name-empty.png
# - 04-onboarding-name-filled.png
# - 05-onboarding-voice.png
# - 06-feed.png
