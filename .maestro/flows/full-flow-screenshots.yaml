# full-flow-screenshots.yaml - Complete flow capturing all screens
# Run: maestro test .maestro/flows/full-flow-screenshots.yaml
#
# This flow:
# 1. Logs in with test account (0000000000 + password)
# 2. Goes through onboarding
# 3. Captures each screen along the way

appId: app.rork.reelfull

# Test credentials - CHANGE THESE TO YOUR VALUES
env:
  TEST_PHONE: "0000000000"
  TEST_PASSWORD: "3rwnSHUx2TFRvU"
  TEST_NAME: "Kate"

---
# ========================================
# STEP 1: Launch and capture intro screen
# ========================================
- launchApp:
    clearState: true
    clearKeychain: true

# Wait for intro to load
- extendedWaitUntil:
    visible:
      text: "Reelful"
    timeout: 15000

# Wait for buttons to appear
- extendedWaitUntil:
    visible:
      text: "Get Started"
    timeout: 10000

- takeScreenshot: .maestro/screenshots/01-intro

# ========================================
# STEP 2: Navigate to auth and capture
# ========================================
- tapOn:
    text: "Get Started"

- extendedWaitUntil:
    visible:
      text: "Welcome!"
    timeout: 5000

- takeScreenshot: .maestro/screenshots/02-auth-empty

# ========================================
# STEP 3: Enter phone number (backdoor)
# ========================================
- tapOn:
    text: "Phone Number"
    optional: true

- tapOn:
    id: "phoneInput"
    optional: true

# Clear any existing text and enter phone
- inputText: ${TEST_PHONE}

- takeScreenshot: .maestro/screenshots/02-auth-phone-entered

# ========================================
# STEP 4: Go to password screen
# ========================================
- tapOn:
    text: "Continue"

- extendedWaitUntil:
    visible:
      text: "Enter Password"
    timeout: 5000

- takeScreenshot: .maestro/screenshots/03-auth-password-empty

# ========================================
# STEP 5: Enter password and login
# ========================================
- tapOn:
    text: "Enter password"
    optional: true

- inputText: ${TEST_PASSWORD}

- takeScreenshot: .maestro/screenshots/03-auth-password-filled

- tapOn:
    text: "Login"

# ========================================
# STEP 6: Onboarding - Name screen
# ========================================
- extendedWaitUntil:
    visible:
      text: "Welcome to Reelful"
    timeout: 10000

- takeScreenshot: .maestro/screenshots/04-onboarding-name-empty

# Enter name
- tapOn:
    text: "Enter your name"
    optional: true

- inputText: ${TEST_NAME}

- takeScreenshot: .maestro/screenshots/04-onboarding-name-filled

# ========================================
# STEP 7: Onboarding - Voice screen
# ========================================
- tapOn:
    text: "Next"

- extendedWaitUntil:
    visible:
      text: "Record Your Voice"
    timeout: 5000

- takeScreenshot: .maestro/screenshots/05-onboarding-voice

# Skip voice recording
- tapOn:
    text: "Skip for now"

# ========================================
# STEP 8: Feed screen
# ========================================
- extendedWaitUntil:
    visible:
      text: "Your Videos"
    timeout: 10000
    optional: true

# Wait a moment for content to load
- swipe:
    direction: DOWN
    duration: 200

- takeScreenshot: .maestro/screenshots/06-feed

# ========================================
# STEP 9: Composer screen (if accessible)
# ========================================
# Look for the "+" or create button
- tapOn:
    text: "Create"
    optional: true

- tapOn:
    id: "createButton"
    optional: true

# If composer opens, capture it
- extendedWaitUntil:
    visible:
      text: "share your story"
    timeout: 5000
    optional: true

- takeScreenshot: .maestro/screenshots/07-composer
  optional: true

# Close composer if open
- tapOn:
    id: "closeButton"
    optional: true

# ========================================
# STEP 10: Settings screen
# ========================================
# Navigate to settings (usually via tab or menu)
- tapOn:
    text: "Settings"
    optional: true

- tapOn:
    id: "settingsTab"
    optional: true

- extendedWaitUntil:
    visible:
      text: "Settings"
    timeout: 5000
    optional: true

- takeScreenshot: .maestro/screenshots/08-settings
  optional: true

# ========================================
# DONE - Screenshots saved to .maestro/screenshots/
# ========================================
